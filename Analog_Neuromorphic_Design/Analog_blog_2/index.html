<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
      pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: GitHub Dark Dimmed
  Description: Dark dimmed theme as seen on github.com
  Author: github.com
  Maintainer: @Hirse
  Updated: 2021-05-15

  Colors taken from GitHub's CSS
*/.hljs{color:#adbac7;background:#22272e}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#f47067}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#dcbdfb}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#6cb6ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#96d0ff}.hljs-built_in,.hljs-symbol{color:#f69d50}.hljs-code,.hljs-comment,.hljs-formula{color:#768390}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#8ddb8c}.hljs-subst{color:#adbac7}.hljs-section{color:#316dca;font-weight:700}.hljs-bullet{color:#eac55f}.hljs-emphasis{color:#adbac7;font-style:italic}.hljs-strong{color:#adbac7;font-weight:700}.hljs-addition{color:#b4f1b4;background-color:#1b4721}.hljs-deletion{color:#ffd8d3;background-color:#78191b}
      :root {
  /* --primary: hsl(36, 65%, 39%);
  --primary-dark: hsl(36, 65%, 30%);
  --primary-darker: hsl(36, 100%, 13%);
  --accent: #00A0A0;
  --neutral: #F8F8EC;
  --neutral-300: #D8D8C5; */



  /* --primary: #4aa2ee;
  --primary-light: #94d6fe;
  --primary-dark: #4b73d2;
  --primary-darker: #152344;
  --neutral: #edf8ff;
  --neutral: #f9fdff;
  --accent: #ffb7c5; */


  --primary-light: #7FA1C3;
  --primary: #6482AD;
  --primary-dark: #496285;
  --primary-darker: #364c69;

  --neutral-light: #fff6f6;
  --neutral: #F5EDED;
  --neutral-dark: #E2DAD6;

  --text-color: #484e60;
  --text-color-light: #717685;
  --border-color: #C1BDBC;
}
      /* This file contains the styles for the markdown output */

article {
  padding-bottom: 10rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  line-height: 1.5;
}

article>header {
  margin-top: 2rem;
  margin-bottom: 1rem;
}

p.subtitle {
  color: var(--text-color-light);
  font-weight: bold;
}

article h1,
article h2,
article h3,
article h4,
article h5,
article h6 {
  margin-top: 1rem;
}

article>hr {
  width: 100%;
}

hr {
  border-color: var(--border-color);
  border-style: solid;
}

h1 {
  font-size: 2.25rem;
}

h2 {
  font-size: 1.75rem;
}

a {
  color: var(--primary-dark);
}

a:visited {
  color: var(--primary-darker);
}

li>*:not(ul):nth-child(n+2) {
  margin-top: 1rem;
}

code {
  padding: 2px 4px;
  border-radius: 4px;
  color: var(--text-color);
  background-color: var(--neutral-dark);
}

pre {
  display: block;
  padding: 9.5px;
  font-size: 0.75rem;
  line-height: 1.4;
  color: var(--text-color);
  word-break: break-all;
  word-wrap: break-word;
  background-color: var(--neutral-light);
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre>code {
  padding: 0;
  font-size: inherit;
  color: inherit;
  white-space: pre-wrap;
  background-color: transparent;
  border-radius: 0;
}

blockquote {
  padding: 0.75rem 1rem;
  font-size: 1.125rem;
  color: var(--text-color-light);
  background-color: var(--neutral);
  border-left: 4px solid var(--border-color);
  border-radius: 4px;
  display: flex;
  gap: 0.75rem;
  flex-direction: column;
}

table {
  width: 100%;
  max-width: 100%;
  border-collapse: collapse;
}

table th {
  padding: 0.5rem;
  border-bottom: 2px solid var(--border-color);
}

table td {
  padding: 0.5rem;
  border-bottom: 1px solid var(--border-color);
}

table>tbody>tr:nth-child(odd) {
  background-color: var(--neutral-light);
}

article img {
  max-width: 100%;
}
      /* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Remove default margin */
body,
h1,
h2,
h3,
h4,
h5,
h6,
p,
figure,
blockquote,
ol,
ul,
pre {
  margin: 0;
}


/*  */

html {
  scrollbar-color: var(--border-color) var(--neutral-dark);
}

body {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--neutral);
  color: var(--text-color);
  font-family: 'Roboto', sans-serif;
}


nav {
  width: 100%;
  padding: 0.5rem 1rem;

  display: flex;
  align-items: flex-end;
  gap: 2rem;

  background-color: var(--primary);
  color: var(--neutral-dark);
}

nav h1,
nav h2 {
  color: var(--neutral);
}

nav>a,
nav>h1,
nav>h2 {
  text-decoration: none;
  border-bottom: 4px solid transparent;
}

nav a:hover,
nav h1.active,
nav h2.active {
  border-bottom-color: var(--neutral);
}

main {
  width: 100%;
  padding: 1rem;

  display: flex;
  flex-direction: row;
  gap: 1rem;
  justify-content: center;
  align-items: flex-start;
}

aside {
  max-width: 150px;
  flex-shrink: 0;
  padding-top: 4em;
  font-size: 14px;

  position: sticky;
  top: 0;

  display: flex;
  flex-direction: column;

}

aside a {
  padding: 0.25rem;
}

aside a[aria-current="page"] {
  background-color: var(--neutral-dark);
  border-radius: 4px;
}

article {
  max-width: 800px;

}

.container {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/*  */

img.headshot {
  width: 200px;
  height: 200px;
  border-radius: 50%;
  object-fit: cover;
}

/* BUTTON STYLES */
button,
a.btn {
  background-color: var(--primary);
  color: var(--neutral);
  border: none;
  font-size: 1rem;
  font-weight: bold;
  padding: 0.5rem 1.5rem;
  border-radius: 4px;
  text-decoration: none;
  display: inline-block;
}

button:hover,
a.btn:hover {
  background-color: var(--primary-dark);
}

a.btn:active {
  background-color: var(--primary-darker);
}

a.btn:visited {
  color: var(--neutral);
}

/* CARD STYLES */
.cards-container {
  display: grid;
  gap: 1rem;
}

.card {
  display: flex;
  flex-direction: column;
  background-color: var(--neutral-light);
  border-radius: 8px;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
}

.card>img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 8px 8px 0 0;
  border: none;
}

.card>.img {
  height: 200px;
  background-color: var(--neutral-dark);
  text-align: center;
}

.card>.img>svg {
  height: 100%;
  margin: 0 auto;
}

.card>.card-content {
  padding: 1rem;
  flex: 1 0 0;
  display: flex;
  gap: 1rem;
  flex-direction: column;
  justify-content: space-between;
}

.card>.card-content h2 {
  margin: 0;
  font-size: 1.125rem;
}

.card a.btn {
  align-self: flex-start;
}

@media only screen and (max-width: 800px) {
  main {
    flex-direction: column;
    align-items: center;
  }

  h1 {
    font-size: 1.75rem;
  }

  h2 {
    font-size: 1.5rem;
  }

  h3 {
    font-size: 1.25rem;
  }

  aside {
    padding-top: 0;
    max-width: 100%;
    flex-direction: row;
    flex-wrap: wrap;
    position: relative;
  }
}

@media only screen and (max-width: 400px) {
  h1 {
    font-size: 1.5rem;
  }

  h2 {
    font-size: 1.25rem;
  }

  h3 {
    font-size: 1.125rem;
  }
}
    </style>

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">


    <title>Analog Blog 2</title>
  </head>

  <body>
    <nav>
      
  <a href="/Blog-Neurotouch/">
    <h1>Home</h1>
  </a>



  <a href="/Blog-Neurotouch/about">
    <h2>about</h2>
  </a>

    </nav>
    <main>

      
<aside>
  
    <a
      
      href="/Blog-Neurotouch/Analog_Neuromorphic_Design/Analog_blog_1/">
      Analog Blog 1
    </a>
  
    <a
      
      aria-current="page"
      
      href="/Blog-Neurotouch/Analog_Neuromorphic_Design/Analog_blog_2/">
      Analog Blog 2
    </a>
  
    <a
      
      href="/Blog-Neurotouch/Analog_Neuromorphic_Design/Analog_blog_3/">
      Analog Blog 3
    </a>
  
    <a
      
      href="/Blog-Neurotouch/Analog_Neuromorphic_Design/Analog_blog_4/">
      Analog Blog 4
    </a>
  
    <a
      
      href="/Blog-Neurotouch/Analog_Neuromorphic_Design/">
      Analog Neuromorphic Design Landing
    </a>
  
</aside>

<article>
  
  <h1>Design an Inverter</h1>
<p>Now that we have our software installed we are going to start with an inverter and heavily explore the analysis types possible in xschem. The inverter is also a crucial element in the design of various</p>
<p>It is the most basic neuron we can make and it only takes a few components so it's the perfect beginners example.
In this part, we are going to create a schematic of the neuron, learn how to select the components of the sky-water family and set up a simulation.</p>
<h3>Essential Xshcem Shortcuts</h3>
<ol>
<li>add component: <strong>cltr+i</strong></li>
<li>copy component: select, <strong>c, drag, left click</strong></li>
<li>move objects: <strong>left click,m,move_coursor&quot;,left click</strong></li>
<li>mirror selected object horizontally:<strong>shift+f</strong></li>
<li>add a wire: <strong>w</strong> then <strong>left click</strong></li>
<li>recenter drawing: <strong>f</strong></li>
</ol>
<h2>Schematic</h2>
<p>#if at any point you see your wires and pins turning into various colors of the rainbow, don't worry, you probably clicked Netlist (n).
Press shift+k to return everything to their normal colors, the only thing that happened was that opened nets were selected.</p>
<p>We want to create the following circuit:</p>
<h2>Simulation</h2>
<p>We need to create two files to simulate this circuit</p>
<ul>
<li>
<p><strong>tt</strong> : which specifies at which corner we are going to be working (that is, at which temperature and pressure state we are working at)</p>
</li>
<li>
<p><strong>STIMULI</strong> : where we define how our simulation is going to go</p>
</li>
</ul>
<h3>Writing stimuli file</h3>
<p>Open the stimuli file to write the code</p>
<p>if a line starts with a period (like .op or .save all) it means its
If a line has no period it means its a SPICE- command</p>
<p>we wanna write the following control block into it</p>
<pre class="hljs"><code>

</code></pre>
<p>.save all tells SPICE to save all node voltages
and branch currents.
.op performs an operating point analysis.
.tran 10n 2000u uic sets up a transient analysis from 0 to 2000 microseconds, with a step size of 10 nanoseconds. 'uic' means &quot;use initial conditions&quot;.
The .control ... .endc block contains commands for ngspice's interactive interpreter.
run executes the analyses defined above (both .op and .tran).
write test_comparator.raw saves the results to a file.</p>
<h3>SIMULATION SHORTCUTES</h3>
<p>-f zoom into the horizontal length
-d</p>
<h2>Analysis</h2>
<p>The above circuit works as it is, but let's analyze the circuit elements behind it. As mentioned before we have the neuron architecture, a double inverter amplifier, and a current mirror serving as a current source. Fortunately for us, the inverter is one of the first structures analyzed in the Rehzavi Analog Integrated Circuits book, which if you should take a look if its</p>
<h3>Equations</h3>
<p>A quick reminder of the equations governing the behavior of a transistor:</p>
<ul>
<li>
<p><strong>Drain current (I_D) for NMOS</strong>:</p>
<ul>
<li>When <code>V_GS &gt; V_th</code> and <code>V_DS &gt; V_GS - V_th</code>, the drain current is given by:
<section><eqn><span class="katex"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>I</mi><msub><mi>D</mi><mi>n</mi></msub></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msub><mi>μ</mi><mi>n</mi></msub><msub><mi>C</mi><mrow><mi>o</mi><mi>x</mi></mrow></msub><mfrac><msub><mi>W</mi><mi>n</mi></msub><msub><mi>L</mi><mi>n</mi></msub></mfrac><mo stretchy="false">(</mo><msub><mi>V</mi><mrow><mi>G</mi><msub><mi>S</mi><mi>n</mi></msub></mrow></msub><mo>−</mo><msub><mi>V</mi><mrow><mi>t</mi><msub><mi>h</mi><mi>n</mi></msub></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">I_{D_n} = \frac{1}{2} \mu_n C_{ox} \frac{W_n}{L_n} (V_{GS_n} - V_{th_n})^2</annotation></semantics></math></span></eqn></section></li>
</ul>
</li>
<li>
<p><strong>Drain current (I_D) for PMOS</strong>:</p>
<ul>
<li>When <code>V_SG &gt; V_th</code> and <code>V_SD &gt; V_SG - V_th</code>, the drain current is given by:
<section><eqn><span class="katex"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>I</mi><msub><mi>D</mi><mi>p</mi></msub></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msub><mi>μ</mi><mi>p</mi></msub><msub><mi>C</mi><mrow><mi>o</mi><mi>x</mi></mrow></msub><mfrac><msub><mi>W</mi><mi>p</mi></msub><msub><mi>L</mi><mi>p</mi></msub></mfrac><mo stretchy="false">(</mo><msub><mi>V</mi><mrow><mi>G</mi><msub><mi>S</mi><mi>p</mi></msub></mrow></msub><mo>−</mo><msub><mi>V</mi><mrow><mi>t</mi><msub><mi>h</mi><mi>p</mi></msub></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">I_{D_p} = \frac{1}{2} \mu_p C_{ox} \frac{W_p}{L_p} (V_{GS_p} - V_{th_p})^2</annotation></semantics></math></span></eqn></section>
Where:</li>
</ul>
</li>
<li>
<p><code>μn</code> and <code>μp</code> are the mobility for electrons and holes, respectively.</p>
</li>
<li>
<p><code>Cox</code> is the gate oxide capacitance per unit area.</p>
</li>
<li>
<p><code>W</code> and <code>L</code> are the width and length of the transistor channel.</p>
</li>
<li>
<p><code>V_GS</code>, <code>V_SG</code>, <code>V_DS</code>, and <code>V_SD</code> are the gate-source and drain-source voltages for NMOS and PMOS, respectively.</p>
</li>
<li>
<p><code>V_th</code> is the threshold voltage.</p>
</li>
<li>
<p><code>λ</code> is the channel-length modulation parameter.</p>
</li>
</ul>
<h2>Inverter</h2>
<p>There are three aspects we can analyze about the inverter, switching speed, drive strength matching and power efficiency,</p>
<p>When we look at the inverter diagram we can see that the currents coming out of the drain of the Pmos and Nmos transistors have
no choice but to equal each other. We can follow through with this equality to then match the width/length ratios as to balance the rise and fall times.</p>
<section><eqn><span class="katex"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>I</mi><mi>n</mi></msub><mo>=</mo><msub><mi>I</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">I_n =I_p</annotation></semantics></math></span></eqn></section><section><eqn><span class="katex"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>μ</mi><mi>n</mi></msub><msub><mi>C</mi><mrow><mi>o</mi><mi>x</mi></mrow></msub><mfrac><msub><mi>W</mi><mi>n</mi></msub><msub><mi>L</mi><mi>n</mi></msub></mfrac><mo stretchy="false">(</mo><msub><mi>V</mi><mrow><mi>G</mi><msub><mi>S</mi><mi>n</mi></msub></mrow></msub><mo>−</mo><msub><mi>V</mi><mrow><mi>t</mi><msub><mi>h</mi><mi>n</mi></msub></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><msub><mi>μ</mi><mi>p</mi></msub><msub><mi>C</mi><mrow><mi>o</mi><mi>x</mi></mrow></msub><mfrac><msub><mi>W</mi><mi>p</mi></msub><msub><mi>L</mi><mi>p</mi></msub></mfrac><mo stretchy="false">(</mo><msub><mi>V</mi><mrow><mi>G</mi><msub><mi>S</mi><mi>p</mi></msub></mrow></msub><mo>−</mo><msub><mi>V</mi><mrow><mi>t</mi><msub><mi>h</mi><mi>p</mi></msub></mrow></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mu_n C_{ox} \frac{W_n}{L_n} (V_{GS_n} - V_{th_n})^2 = \mu_p C_{ox} \frac{W_p}{L_p} (V_{GS_p} - V_{th_p})^2</annotation></semantics></math></span></eqn></section><section><eqn><span class="katex"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><msub><mi>W</mi><mi>n</mi></msub><msub><mi>L</mi><mi>n</mi></msub></mfrac><mo>=</mo><mi>k</mi><mo>⋅</mo><mfrac><msub><mi>W</mi><mi>p</mi></msub><msub><mi>L</mi><mi>p</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\frac{W_n}{L_n} = k \cdot \frac{W_p}{L_p}</annotation></semantics></math></span></eqn></section><section><eqn><span class="katex"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mi>n</mi></msub><mo>=</mo><msub><mi>L</mi><mi>p</mi></msub><mo>=</mo><mn>130</mn><mtext> </mtext><mtext>nm</mtext></mrow><annotation encoding="application/x-tex">L_n = L_p = 130 \, \text{nm}</annotation></semantics></math></span></eqn></section><p>W reduces short-circuit power during switching and ensures proper logic levels with minimal static power consumption.</p>
<p>L reduces the channel resistance, enhancing switching speed.</p>

</article>

    </main>
  </body>

</html>